<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>태양계 시뮬레이션</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            font-family: Arial, sans-serif;
        }
        canvas {
            display: block;
        }
        #controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px; /* 패딩 축소 */
            border-radius: 8px;
            border: 1px solid #444;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
        }
        .control-group {
            margin-bottom: 10px; /* 마진 축소 */
        }
        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 13px; /* 폰트 크기 축소 */
        }
        .control-group input[type="range"] {
            width: 160px; /* 슬라이더 너비 축소 */
        }
        .control-group span {
            font-size: 11px; /* 폰트 크기 축소 */
            margin-left: 10px;
        }
    </style>
</head>
<body>

    <div id="controls">
        <div class="control-group">
            <label for="speed">공전 속도</label>
            <input type="range" id="speed" min="0.1" max="5" step="0.1" value="1">
            <span id="speedValue">1.0x</span>
        </div>
        <div class="control-group">
            <label for="sunBrightness">태양 밝기</label>
            <input type="range" id="sunBrightness" min="0.2" max="2" step="0.1" value="1">
            <span id="sunBrightnessValue">1.0x</span>
        </div>
        <div class="control-group">
            <label for="starBrightness">별 밝기</label>
            <input type="range" id="starBrightness" min="0.1" max="1" step="0.05" value="0.5">
            <span id="starBrightnessValue">0.5</span>
        </div>
        <div class="control-group">
            <label for="planetSize">행성 크기</label>
            <input type="range" id="planetSize" min="0.5" max="2" step="0.1" value="1">
            <span id="planetSizeValue">1.0x</span>
        </div>
        <div class="control-group">
            <label for="orbitVisibility">궤도 가시성</label>
            <input type="range" id="orbitVisibility" min="0" max="1" step="0.05" value="0.3">
            <span id="orbitVisibilityValue">0.3</span>
        </div>
    </div>

    <canvas id="solarSystemCanvas"></canvas>

    <script>
        const canvas = document.getElementById('solarSystemCanvas');
        const ctx = canvas.getContext('2d');

        let width = window.innerWidth;
        let height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;

        // 컨트롤 UI 요소
        const speedSlider = document.getElementById('speed');
        const sunBrightnessSlider = document.getElementById('sunBrightness');
        const starBrightnessSlider = document.getElementById('starBrightness');
        const planetSizeSlider = document.getElementById('planetSize');
        const orbitVisibilitySlider = document.getElementById('orbitVisibility');

        const speedValueSpan = document.getElementById('speedValue');
        const sunBrightnessValueSpan = document.getElementById('sunBrightnessValue');
        const starBrightnessValueSpan = document.getElementById('starBrightnessValue');
        const planetSizeValueSpan = document.getElementById('planetSizeValue');
        const orbitVisibilityValueSpan = document.getElementById('orbitVisibilityValue');

        // 컨트롤 값 변수
        let controls = {
            speed: 1,
            sunBrightness: 1,
            starBrightness: 0.5,
            planetSize: 1,
            orbitVisibility: 0.3
        };

        // 이벤트 리스너 연결
        speedSlider.addEventListener('input', (e) => {
            controls.speed = parseFloat(e.target.value);
            speedValueSpan.textContent = `${controls.speed.toFixed(1)}x`;
        });
        sunBrightnessSlider.addEventListener('input', (e) => {
            controls.sunBrightness = parseFloat(e.target.value);
            sunBrightnessValueSpan.textContent = `${controls.sunBrightness.toFixed(1)}x`;
        });
        starBrightnessSlider.addEventListener('input', (e) => {
            controls.starBrightness = parseFloat(e.target.value);
            starBrightnessValueSpan.textContent = controls.starBrightness.toFixed(2);
        });
        planetSizeSlider.addEventListener('input', (e) => {
            controls.planetSize = parseFloat(e.target.value);
            planetSizeValueSpan.textContent = `${controls.planetSize.toFixed(1)}x`;
        });
        orbitVisibilitySlider.addEventListener('input', (e) => {
            controls.orbitVisibility = parseFloat(e.target.value);
            orbitVisibilityValueSpan.textContent = controls.orbitVisibility.toFixed(2);
        });


        const center = { x: width / 2, y: height / 2 + 60 }; // Y 좌표를 아래로 이동
        const orbitTilt = 0.4; // 타원 궤도의 기울기

        // 별 생성
        const stars = [];
        for (let i = 0; i < 200; i++) {
            stars.push({
                x: Math.random() * width,
                y: Math.random() * height,
                radius: Math.random() * 1.2,
            });
        }

        // 행성 데이터
        const planets = [
            { name: '수성', radius: 5, orbit: 70, speed: 0.047, color: '#bbb', angle: Math.random() * 2 * Math.PI },
            { name: '금성', radius: 8, orbit: 110, speed: 0.035, color: '#e6e6e6', angle: Math.random() * 2 * Math.PI },
            { name: '지구', radius: 8, orbit: 150, speed: 0.030, color: '#4c7baf', angle: Math.random() * 2 * Math.PI },
            { name: '화성', radius: 6, orbit: 190, speed: 0.024, color: '#c1440e', angle: Math.random() * 2 * Math.PI },
            { name: '목성', radius: 20, orbit: 290, speed: 0.013, color: '#e0ae6f', angle: Math.random() * 2 * Math.PI },
            { name: '토성', radius: 17, orbit: 370, speed: 0.009, color: '#f4d4ab', angle: Math.random() * 2 * Math.PI, hasRing: true }
        ];

        function drawStars() {
            stars.forEach(star => {
                const gradient = ctx.createRadialGradient(star.x, star.y, 0, star.x, star.y, star.radius);
                gradient.addColorStop(0, `rgba(255, 255, 255, ${controls.starBrightness})`);
                gradient.addColorStop(1, `rgba(255, 255, 255, 0)`);
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.radius, 0, 2 * Math.PI);
                ctx.fill();
            });
        }

        function drawSun() {
            const sunRadius = 30;
            const pulse = Math.sin(Date.now() * 0.001) * 2 + sunRadius; // 박동 애니메이션
            const glow = pulse + 20;

            // 글로우 효과
            const glowGradient = ctx.createRadialGradient(center.x, center.y, pulse, center.x, center.y, glow);
            glowGradient.addColorStop(0, `rgba(255, 223, 186, ${0.5 * controls.sunBrightness})`);
            glowGradient.addColorStop(1, 'rgba(255, 165, 0, 0)');
            ctx.fillStyle = glowGradient;
            ctx.fillRect(center.x - glow, center.y - glow, glow * 2, glow * 2);

            // 태양 본체
            const sunGradient = ctx.createRadialGradient(center.x, center.y, 0, center.x, center.y, pulse);
            sunGradient.addColorStop(0, `rgba(255, 255, 255, ${controls.sunBrightness})`);
            sunGradient.addColorStop(0.5, `rgba(255, 255, 0, ${controls.sunBrightness})`);
            sunGradient.addColorStop(1, `rgba(255, 165, 0, ${0.5 * controls.sunBrightness})`);
            
            ctx.fillStyle = sunGradient;
            ctx.beginPath();
            ctx.arc(center.x, center.y, pulse, 0, 2 * Math.PI);
            ctx.fill();

            // 레이블
            drawLabel('태양', center.x, center.y + pulse + 15);
        }
        
        function drawOrbit(radius) {
            ctx.strokeStyle = `rgba(200, 200, 200, ${controls.orbitVisibility})`;
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.ellipse(center.x, center.y, radius, radius * orbitTilt, 0, 0, 2 * Math.PI);
            ctx.stroke();
        }

        function drawAsteroidBelt() {
            const radius = (190 + 290) / 2; // 화성과 목성 궤도 사이
            ctx.strokeStyle = `rgba(150, 150, 150, ${controls.orbitVisibility * 0.8})`;
            ctx.lineWidth = 1;
            ctx.setLineDash([2, 4]);
            ctx.beginPath();
            ctx.ellipse(center.x, center.y, radius, radius * orbitTilt, 0, 0, 2 * Math.PI);
            ctx.stroke();
            ctx.setLineDash([]); // 점선 초기화
            
            // 레이블
            drawLabel('소행성대', center.x + radius, center.y, 0.7);
        }

        function drawSaturnsRing(x, y, radius) {
            ctx.strokeStyle = `rgba(244, 212, 171, ${0.7 * controls.orbitVisibility})`;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.ellipse(x, y, radius * 1.5, radius * 1.5 * orbitTilt * 0.5, 0, 0, 2 * Math.PI);
            ctx.stroke();
        }

        function drawPlanet(planet) {
            const scaledRadius = planet.radius * controls.planetSize;
            const x = center.x + Math.cos(planet.angle) * planet.orbit;
            const y = center.y + Math.sin(planet.angle) * planet.orbit * orbitTilt;

            // 글로우 효과
            ctx.shadowBlur = 15;
            ctx.shadowColor = planet.color;

            // 행성 본체
            const gradient = ctx.createRadialGradient(x - scaledRadius/3, y - scaledRadius/3, 0, x, y, scaledRadius);
            gradient.addColorStop(0, '#ffffff');
            gradient.addColorStop(0.7, planet.color);
            gradient.addColorStop(1, '#000000');
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(x, y, scaledRadius, 0, 2 * Math.PI);
            ctx.fill();

            // 그림자 초기화
            ctx.shadowBlur = 0;

            // 토성 고리
            if (planet.hasRing) {
                drawSaturnsRing(x, y, scaledRadius);
            }
            
            // 레이블
            drawLabel(planet.name, x, y + scaledRadius + 12);

            // 각도 업데이트
            planet.angle += planet.speed * 0.1 * controls.speed;
        }
        
        function drawLabel(text, x, y, opacity = 0.5) {
            ctx.fillStyle = `rgba(255, 255, 255, ${opacity})`;
            ctx.font = "10px Arial";
            ctx.textAlign = "center";
            ctx.fillText(text, x, y);
        }

        function animate() {
            requestAnimationFrame(animate);
            ctx.clearRect(0, 0, width, height);

            // 배경 그리기
            drawStars();

            // 궤도 그리기
            planets.forEach(p => drawOrbit(p.orbit));
            drawAsteroidBelt();

            // 천체 그리기
            drawSun();
            planets.forEach(p => drawPlanet(p));
        }

        window.addEventListener('resize', () => {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            center.x = width / 2;
            center.y = height / 2 + 60; // 리사이즈 시에도 Y 좌표 유지
        });

        // 초기 컨트롤 값 설정
        speedValueSpan.textContent = `${controls.speed.toFixed(1)}x`;
        sunBrightnessValueSpan.textContent = `${controls.sunBrightness.toFixed(1)}x`;
        starBrightnessValueSpan.textContent = controls.starBrightness.toFixed(2);
        planetSizeValueSpan.textContent = `${controls.planetSize.toFixed(1)}x`;
        orbitVisibilityValueSpan.textContent = controls.orbitVisibility.toFixed(2);
        
        animate();
    </script>
</body>
</html>
