<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>교사 강점 진단 테스트</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@700&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f7f8;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2307575B' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        h1, h2, h3 {
             font-family: 'Gaegu', cursive;
             font-weight: 700;
        }
        /* Vibrant & Trustworthy Palette */
        :root {
            --bg-dark-sea: #003B46;
            --bg-sea-blue: #07575B;
            --accent-teal: #66A5AD;
            --bg-light-blue: #C4DFE6;
            --accent-coral: #ED6A5A;
        }
        .bg-primary { background-color: var(--bg-dark-sea); }
        .bg-secondary { background-color: var(--bg-sea-blue); }
        .text-accent { color: var(--accent-coral); }
        .border-accent { border-color: var(--accent-coral); }
        
        /* Chart container styling for responsiveness */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Default height for smaller screens */
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 450px; /* Taller on larger screens */
            }
        }

        /* Interactive element styling */
        .btn {
            transition: all 0.3s ease;
        }
        .btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
        
        /* New colorful answer card styles */
        .answer-card {
            transition: all 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-width: 2px;
            border-color: transparent;
            position: relative;
            overflow: hidden;
        }
        .answer-card:before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 0;
            height: 100%;
            background-color: rgba(255,255,255,0.3);
            transition: width 0.3s ease;
        }
        .answer-card:hover:before {
            width: 100%;
        }
        .answer-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .answer-color-1 { background-color: #a2d2ff; color: #003049; border-color: #bde0fe; }
        .answer-color-2 { background-color: #ffc8dd; color: #c9184a; border-color: #ffafcc; }
        .answer-color-3 { background-color: #cdb4db; color: #5a189a; border-color: #dda0dd; }
        .answer-color-4 { background-color: #b2f2bb; color: #004b23; border-color: #caffbf; }


        /* Animation for loading indicator */
        .animate-bounce {
            animation-duration: 1.4s;
        }
    </style>
</head>
<body class="text-gray-800">

    <div id="app" class="container mx-auto p-4 md:p-8 max-w-7xl">

        <!-- Introduction Section -->
        <section id="intro-section" class="text-center py-12">
            <h1 class="text-5xl md:text-6xl text-primary mb-4">나의 강점 찾기!</h1>
            <p class="text-lg text-secondary max-w-3xl mx-auto mb-8">
                선생님의 핵심 강점을 발견해봅시다.
            </p>
            <!-- === BUTTON UPDATED HERE === -->
            <button id="start-btn" class="btn bg-gradient-to-r from-orange-500 to-red-600 text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg hover:shadow-xl hover:brightness-110">
                테스트 시작하기
            </button>
        </section>

        <!-- Quiz Section -->
        <section id="quiz-section" class="hidden">
            <div class="mb-8">
                <div class="bg-gray-200 rounded-full h-4 overflow-hidden">
                    <div id="progress-bar" class="bg-gradient-to-r from-yellow-400 via-red-500 to-pink-500 h-4 rounded-full transition-all duration-300 ease-in-out" style="width: 0%;"></div>
                </div>
                <p id="progress-text" class="text-center mt-2 text-sm text-secondary font-semibold"></p>
            </div>
            <div id="question-container" class="bg-white p-6 md:p-8 rounded-2xl shadow-xl">
                <h2 id="question-title" class="text-3xl font-bold mb-6 text-primary"></h2>
                <div id="answer-options" class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                </div>
            </div>
        </section>
        
        <!-- Loading Section -->
        <section id="loading-section" class="hidden text-center py-20">
            <div class="flex justify-center items-center space-x-2">
                <div class="w-4 h-4 rounded-full bg-accent-coral animate-bounce [animation-delay:-0.3s]"></div>
                <div class="w-4 h-4 rounded-full bg-accent-coral animate-bounce [animation-delay:-0.15s]"></div>
                <div class="w-4 h-4 rounded-full bg-accent-coral animate-bounce"></div>
            </div>
            <h2 class="text-3xl font-bold text-primary mt-6">두근두근...<br>진단 결과를 분석중입니다!</h2>
        </section>

        <!-- Result Section -->
        <section id="result-section" class="hidden">
            <div class="text-center mb-12">
                <h1 class="text-5xl md:text-6xl font-bold text-primary mb-3">진단 결과</h1>
                <p id="result-headline" class="text-2xl text-accent font-bold"></p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                <div class="lg:col-span-3 bg-white p-6 rounded-2xl shadow-xl">
                    <h2 class="text-3xl font-bold text-primary mb-4 text-center">나의 강점 지도 (Strength Map)</h2>
                    <p class="text-center text-gray-600 mb-4">8가지 강점의 균형을 한눈에 확인해보세요. 각 꼭지점은 강점 유형을 나타내며, 바깥으로 뻗어 나갈수록 해당 강점이 강하게 발현됨을 의미합니다.</p>
                    <div class="chart-container mx-auto">
                        <canvas id="strengthMapChart"></canvas>
                    </div>
                </div>

                <div id="top-strengths-container" class="lg:col-span-2 space-y-6">
                    <!-- Top strength cards will be inserted here by JavaScript -->
                </div>
            </div>

            <div class="mt-12 bg-white p-6 rounded-2xl shadow-xl">
                <h2 class="text-3xl font-bold text-primary mb-4 text-center">전체 강점 점수 분석</h2>
                <p class="text-center text-gray-600 mb-4">모든 강점의 점수를 비교하여 나의 강점 프로필을 더 깊이 이해해 보세요. 가장 높은 점수부터 정렬됩니다.</p>
                <div class="chart-container h-96 mx-auto">
                    <canvas id="fullScoresChart"></canvas>
                </div>
            </div>

            <div class="text-center mt-12">
                <button id="restart-btn" class="btn bg-secondary text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg">
                    테스트 다시하기
                </button>
            </div>

        </section>
    </div>

    <script>
        // --- DATA ---
        // Quiz questions with quotes removed for readability.
        const quizData = [
            {
                question: "일이 많고 힘든 부서에 들어간 선생님...",
                answers: [
                    { text: '일단 하면서 방법을 찾아보자.', type: "추진" },
                    { text: '1년 동안 하는 업무를 정리해서, 다른 계원들이랑 잘 나눠야지.', type: "조정" },
                    { text: '작년에 해보신 OOO 선생님께 조언을 구해보자.', type: "외교" },
                    { text: '이 부서 업무 중에 필요없는 건 없애달라고 건의해보자', type: "평가" }
                ]
            },
            {
                question: "회의 중 한 선생님의 기발한 아이디어에 다른 선생님이 \"현실적으로 불가능하다\"고 반박합니다. 선생님은...?",
                answers: [
                    { text: '교장선생님이나 교감선생님께 물어볼까요?', type: "외교" },
                    { text: '결정하기 전에, 유사한 사례를 찾아보는 건 어떨까요?', type: "탐구" },
                    { text: '구체적인 내용으로 들어가 보죠. 다같이 꼼꼼하게 살펴봐요.', type: "완성" },
                    { text: '논쟁만 하다간 시간이 다 갑니다. 일단 해볼까요?', type: "추진" }
                ]
            },
            {
                question: "수업 공개날, 선생님은...?",
                answers: [
                    { text: '수업 지도안, 발문, PPT 까지 실수 없이 완벽하게 준비해야 한다.', type: "완성" },
                    { text: '‘저런 수업도 가능하구나’라고 느낄 만한, 새로운 수업을 시도한다.', type: "창조" },
                    { text: '모든 학생이 즐겁게 참여하고 따뜻한 분위기를 만드는 것이 가장 중요하다.', type: "동기부여" },
                    { text: '학생들이 수업 목표를 잘 달성해서 그 결과물이 보이는 수업을 보여준다.', type: "추진" }
                ]
            },
            {
                question: "동료 교사가 개인적인 사정으로 업무에 집중을 못하자, 학년에 문제가 생기기 시작했습니다. 선생님은...?",
                answers: [
                    { text: '요즘 많이 힘들어 보이시네요. 무슨 일 있으세요? 제가 들어드릴게요.라며 따뜻한 커피 한 잔을 건넨다.', type: "동기부여" },
                    { text: '제가 잠시 그 업무를 맡을 테니, 그동안 부담을 좀 더세요.라며 역할을 재분배.', type: "조정" },
                    { text: '관리자에게 공식적으로 상황을 알리고 병가 등 제도적 지원을 받도록 한다.', type: "평가" },
                    { text: '‘요즘 OOO 선생님이 힘들어 보이시는데, 우리가 어떻게 도와줄 수 있을까?’라며 함께 도울 방법을 모색.', type: "외교" }
                ]
            },
            {
                question: "초보 시절, 가장 힘들었던 점을 떠올린다면 무엇에 가깝습니까?",
                answers: [
                    { text: '수업 계획은 완벽한데, 아이들이 계획대로 움직여주지 않아 당황.', type: "완성" },
                    { text: '처리해야 할 행정 업무의 종류와 절차를 몰라 허둥댔던 경험.', type: "조정" },
                    { text: '아이들과 친해지고 싶은데, 어떻게 해야 할지 몰라 서먹했던 경험.', type: "동기부여" },
                    { text: '누구에게 도움을 청할 지 몰라 혼자 끙끙 앓았던 경험.', type: "외교" }
                ]
            },
             {
                question: "학교 행사, 선생님은 주로 어떤 역할을 맡으시나요?",
                answers: [
                    { text: '학생들을 동원하고 실행을 주도하는 역할.', type: "추진" },
                    { text: '필요한 물품을 체크하는 등 총괄 기획 역할.', type: "조정" },
                    { text: '작년과 똑같이는 재미없으니, 새로운 아이디어 제안.', type: "창조" },
                    { text: '지친 학생과 교사들을 격려하고, 즐겁게 참여하는 분위기를 만드는 역할.', type: "동기부여" }
                ]
            },
            {
                question: "당신이 교사로서 가장 보람을 느끼는 순간은?",
                answers: [
                    { text: '꼼꼼하게 지도한 학생이 상을 받거나 좋은 결과를 냈을 때.', type: "완성" },
                    { text: '어려운 개념을 학생들이 ‘아하!’하며 깨닫는 순간을 볼 때.', type: "탐구" },
                    { text: '학생이 나의 격려를 통해 용기를 얻고 밝게 변화하는 모습을 볼 때.', type: "동기부여" },
                    { text: '함께 도전한 목표(학급 특색활동이나 교과 프로젝트 등)를 성공적으로 완수했을 때.', type: "추진" }
                ]
            },
            {
                question: "새로운 디지털 교육 도구의 도입, 선생님은...?",
                answers: [
                    { text: '도입하기 전에, 도구의 교육적 효과에 대한 연구 결과를 충분히 검토해봐야 합니다.', type: "탐구" },
                    { text: '기존 아날로그 방식보다 정말 나은 점이 무엇인지 냉정하게 따져봐야 합니다.', type: "평가" },
                    { text: '일단 시범적으로 사용해보면서 문제점을 개선해나가면 됩니다.', type: "추진" },
                    { text: '새로운 도구로 특색있는 교육 콘텐츠를 만들 수 있을 것 같습니다.', type: "창조" }
                ]
            },
            {
                question: "학급 운영비를 사용해야 합니다. 선생님은...?",
                answers: [
                    { text: '연간계획에 따라 예산을 배분하고, 계획적으로 지출.', type: "조정" },
                    { text: '학생들의 의견을 수렴하여, 학생들이 좋아하는 이벤트를 연다.', type: "동기부여" },
                    { text: '학생들에게 꼭 필요한 고품질의 학습 자료나 교구를 하나라도 제대로 사준다.', type: "완성" },
                    { text: '교사와 학생들이 함께 할 수 있는 행사에 써서 관계를 돈독하게 한다.', type: "외교" }
                ]
            },
            {
                question: "학생들 사이의 미묘한 갈등이 감지되었습니다. 선생님은...?",
                answers: [
                    { text: '문제가 더 커지기 전에 관련 학생을 즉시 불러 개별 면담 시작', type: "추진" },
                    { text: '섣불리 개입하기보다, 아이들의 상호작용을 더 면밀히 관찰하며 증거를 수집.', type: "완성" },
                    { text: '재밌는 학급 활동을 열어 긍정적인 관계망을 형성하도록 유도.', type: "창조" },
                    { text: '문제 해결을 위한 관계 개선 프로그램을 계획하면서, 상담교사와 협력할 준비.', type: "조정" }
                ]
            },
            {
                question: "방학, 선생님은...?",
                answers: [
                    { text: '전공 서적을 읽거나 대학원 수업을 들으며 재충전과 연구의 시간을 갖는다.', type: "탐구" },
                    { text: '생활기록부 내용을 꼼꼼하게 검토하고, 다음 학기 평가계획을 세운다.', type: "완성" },
                    { text: '평소 해보고 싶었던 새로운 취미를 배우거나 낯선 곳으로 여행을 떠나 영감을 얻는다.', type: "창조" },
                    { text: '방학 동안 실천할 구체적인 목표(예: 매일 운동, 자격증 취득)를 세우고 바로 실행한다.', type: "추진" }
                ]
            },
            {
                question: "가장 스트레스를 받는 부분은?",
                answers: [
                    { text: '예측 불가능한 일이 자꾸 터져서 세워둔 계획이 틀어질 때.', type: "조정" },
                    { text: '시간에 쫓겨 결과물을 만족스럽지 못한 수준으로 제출해야 할 때.', type: "완성" },
                    { text: '매년 똑같은 일을  교육과정과 행사를 반복해야 하는 관행.', type: "창조" },
                    { text: '교사나 학생들 사이에 갈등이 생기고 분위기가 냉랭해질 때.', type: "동기부여" }
                ]
            }
        ];

        // Definitions and details for each of the 8 strengths.
        const strengths = {
            "추진": { icon: "🚀", definition: "목표를 향해 주저 없이 나아가는 실행가", details: "새로운 프로젝트나 활동을 시작하는 데 두려움이 없으며, '일단 해보자'는 정신으로 팀에 활력을 불어넣습니다. 아이디어를 현실로 만드는 강력한 동력을 가지고 있습니다.", synergy: "'창조' 강점의 아이디어를 현실화하고, '조정' 강점의 계획을 실행으로 옮깁니다." },
            "완성": { icon: "🏆", definition: "맡은 일을 완벽하게 마무리하는 전문가", details: "꼼꼼함과 높은 기준으로 결과물의 질을 높입니다. 수업자료, 평가, 행정 업무 등 모든 면에서 실수가 없도록 마무리하여 팀 전체의 신뢰도를 높입니다.", synergy: "'창조'의 아이디어를 정교하게 다듬고, '추진'의 빠른 실행 뒤에 오는 디테일을 챙깁니다." },
            "조정": { icon: "⚖️", definition: "체계적인 계획으로 안정을 만드는 설계자", details: "복잡한 업무와 일정을 체계적으로 정리하고 계획을 세웁니다. 예측 불가능한 상황에 대비하여 여러 대안을 마련해 두어 팀이 안정적으로 운영되도록 돕습니다.", synergy: "'추진' 강점이 나아갈 길을 구체적으로 설계하고, '외교' 강점이 가져온 자원을 효율적으로 배분합니다." },
            "평가": { icon: "🧐", definition: "논리적 분석으로 최선의 답을 찾는 전략가", details: "현실적인 문제점을 날카롭게 분석하고 데이터에 기반하여 객관적인 판단을 내립니다. 감정에 치우치지 않고 공정성과 합리성을 바탕으로 더 나은 대안을 제시합니다.", synergy: "'창조'의 아이디어를 현실적으로 검증하고, '탐구'의 깊이 있는 정보를 바탕으로 명확한 결론을 내립니다." },
            "탐구": { icon: "📚", definition: "깊이 있는 지식으로 통찰을 더하는 학자", details: "새로운 교육 이론이나 지식에 대한 탐구심이 강합니다. 충분한 정보를 수집하고 깊이 연구하여 팀의 의사결정에 전문성과 깊이를 더합니다.", synergy: "'평가' 강점이 판단을 내릴 수 있는 근거 자료를 제공하고, '창조' 강점이 새로운 아이디어를 낼 수 있도록 영감을 줍니다." },
            "창조": { icon: "💡", definition: "새로운 아이디어로 변화를 이끄는 혁신가", details: "기존의 틀에 얽매이지 않고, 늘 새로운 방식으로 문제를 해결하려 합니다. '어떻게 저런 생각을?'이라는 감탄을 자아내는 아이디어로 팀에 신선한 자극과 영감을 줍니다.", synergy: "'추진' 강점과 만나면 아이디어가 빠르게 현실화되고, '완성' 강점과 만나면 아이디어가 더욱 정교해집니다." },
            "동기부여": { icon: "❤️", definition: "따뜻한 격려로 사람의 마음을 움직이는 조력자", details: "학생과 동료의 감정을 세심하게 살피고, 긍정적인 관계를 형성하는 데 탁월합니다. 팀원들이 서로 존중하고 협력하는 분위기를 만들어 잠재력을 최대한 발휘하도록 돕습니다.", synergy: "'평가'의 차가운 분석을 보완하고, 갈등 상황에서 '외교' 강점과 함께 부드러운 해결책을 찾습니다." },
            "외교": { icon: "🤝", definition: "사람과 자원을 연결하여 문제를 해결하는 해결사", details: "넓은 인적 네트워크를 활용하여 필요한 사람이나 자원을 적재적소에 연결합니다. 갈등 상황에서 양측의 입장을 조율하고 협력을 이끌어내는 능력이 뛰어납니다.", synergy: "'조정'의 계획에 필요한 외부 자원을 확보하고, '추진'의 실행 과정에서 발생하는 장애물을 인맥으로 해결합니다." }
        };

        // --- STATE & DOM ELEMENTS ---
        const strengthOrder = ["추진", "완성", "조정", "평가", "탐구", "창조", "동기부여", "외교"];
        let currentQuestionIndex = 0;
        let userScores = {};

        const introSection = document.getElementById('intro-section');
        const quizSection = document.getElementById('quiz-section');
        const loadingSection = document.getElementById('loading-section');
        const resultSection = document.getElementById('result-section');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');

        // --- FUNCTIONS ---

        function initializeTest() {
            currentQuestionIndex = 0;
            userScores = strengthOrder.reduce((acc, str) => ({ ...acc, [str]: 0 }), {});
            
            introSection.classList.remove('hidden');
            quizSection.classList.add('hidden');
            loadingSection.classList.add('hidden');
            resultSection.classList.add('hidden');
        }
        
        function startTest() {
            introSection.classList.add('hidden');
            quizSection.classList.remove('hidden');
            displayQuestion();
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex) / quizData.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').innerText = `진행률: ${currentQuestionIndex} / ${quizData.length}`;
        }
        
        function displayQuestion() {
            updateProgressBar();
            const questionData = quizData[currentQuestionIndex];
            document.getElementById('question-title').innerText = `Q${currentQuestionIndex + 1}. ${questionData.question}`;
            
            const answerOptions = document.getElementById('answer-options');
            answerOptions.innerHTML = ''; 
            
            const answerColors = ['answer-color-1', 'answer-color-2', 'answer-color-3', 'answer-color-4'];
            questionData.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.innerHTML = `<span>${answer.text}</span>`;
                button.classList.add(
                    'answer-card', 'text-left', 'p-5', 'rounded-xl', 'w-full', 'font-semibold', 'text-lg',
                    answerColors[index % answerColors.length]
                );
                button.onclick = () => selectAnswer(answer.type);
                answerOptions.appendChild(button);
            });
        }

        function selectAnswer(type) {
            userScores[type]++;
            currentQuestionIndex++;
            
            if (currentQuestionIndex < quizData.length) {
                displayQuestion();
            } else {
                updateProgressBar();
                quizSection.classList.add('hidden');
                loadingSection.classList.remove('hidden');
                
                setTimeout(() => {
                    loadingSection.classList.add('hidden');
                    showResults();
                }, 1500); 
            }
        }

        function showResults() {
            resultSection.classList.remove('hidden');

            const sortedScores = Object.entries(userScores).sort(([, a], [, b]) => b - a);
            const topStrengths = sortedScores.slice(0, 3).filter(s => s[1] > 0);

            let headlineText = "발견된 강점이 없습니다. 다시 시도해보세요!";
            if (topStrengths.length > 0) {
                headlineText = "선생님의 핵심 강점은 ";
                headlineText += topStrengths.map(s => `<strong>${s[0]}</strong>`).join(', ');
                headlineText += " 입니다!";
            }
            document.getElementById('result-headline').innerHTML = headlineText;

            const topStrengthsContainer = document.getElementById('top-strengths-container');
            topStrengthsContainer.innerHTML = '';

            topStrengths.forEach(([name, score], index) => {
                const strength = strengths[name];
                const card = document.createElement('div');
                card.className = 'bg-white p-6 rounded-2xl shadow-xl flex flex-col transition-all duration-500 opacity-0 transform translate-y-4';
                card.style.transitionDelay = `${index * 150}ms`;
                card.innerHTML = `
                    <h3 class="text-3xl font-bold text-secondary mb-3"><span class="mr-2" role="img" aria-label="${name}">${strength.icon}</span>${name}</h3>
                    <p class="font-semibold text-accent mb-2">${strength.definition}</p>
                    <p class="text-gray-600 mb-4 flex-grow">${strength.details}</p>
                    <div class="mt-auto pt-4 border-t border-gray-200">
                      <p class="text-sm font-bold text-primary">🤝 협업 시너지</p>
                      <p class="text-sm text-gray-600">${strength.synergy}</p>
                    </div>
                `;
                topStrengthsContainer.appendChild(card);
                
                setTimeout(() => card.classList.remove('opacity-0', 'translate-y-4'), 50);
            });
            
            createStrengthMapChart();
            createFullScoresChart();
        }

        function createChart(canvasId, config) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            const existingChart = Chart.getChart(canvasId);
            if (existingChart) {
                existingChart.destroy();
            }
            new Chart(ctx, config);
        }
        
        function createStrengthMapChart() {
            const data = {
                labels: strengthOrder,
                datasets: [{
                    label: '나의 강점 점수',
                    data: strengthOrder.map(s => userScores[s]),
                    backgroundColor: 'rgba(237, 106, 90, 0.2)',
                    borderColor: 'rgba(237, 106, 90, 1)',
                    borderWidth: 2,
                    pointBackgroundColor: 'rgba(237, 106, 90, 1)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(237, 106, 90, 1)'
                }]
            };

            const config = {
                type: 'radar',
                data: data,
                options: {
                    maintainAspectRatio: false, 
                    scales: {
                        r: {
                            angleLines: { color: '#C4DFE6' },
                            grid: { color: '#C4DFE6' },
                            pointLabels: {
                                font: { size: 14, family: "'Noto Sans KR', sans-serif", weight: 'bold' },
                                color: '#07575B'
                            },
                            ticks: {
                                backdropColor: 'rgba(255, 255, 255, 0.75)',
                                color: '#003B46',
                                stepSize: 1
                            },
                            min: 0,
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                title: (tooltipItems) => tooltipItems[0].label
                            }
                        }
                    }
                }
            };
            createChart('strengthMapChart', config);
        }

        function createFullScoresChart() {
            const sortedScores = Object.entries(userScores).sort(([,a],[,b]) => b - a);
            const data = {
                labels: sortedScores.map(s => s[0]),
                datasets: [{
                    label: '점수',
                    data: sortedScores.map(s => s[1]),
                    backgroundColor: sortedScores.map(([name, score]) => {
                        if(score >= 3) return '#ED6A5A'; 
                        if(score >= 2) return '#66A5AD'; 
                        return '#C4DFE6'; 
                    }),
                    borderColor: '#07575B',
                    borderWidth: 1,
                    borderRadius: 5
                }]
            };

            const config = {
                type: 'bar',
                data: data,
                options: {
                    indexAxis: 'y', 
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: { stepSize: 1 },
                            grid: { display: false }
                        },
                        y: {
                             grid: { display: false }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                title: (tooltipItems) => tooltipItems[0].label
                            }
                        }
                    }
                }
            };
            createChart('fullScoresChart', config);
        }

        // --- EVENT LISTENERS ---
        startBtn.addEventListener('click', startTest);
        restartBtn.addEventListener('click', initializeTest);

        // --- INITIALIZATION ---
        initializeTest();

    </script>
</body>
</html>
